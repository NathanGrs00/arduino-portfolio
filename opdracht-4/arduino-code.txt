// Analoge pin voor de potmeter.
const int potPin = A5;
// Waarde van de potknop.
int potValue = 0;
// Array met de pin nummers van de Ledlampjes.
int pinArray[] = {13, 12, 11, 10, 9, 8};
// Bereken de hoeveelheid ledjes we hebben.
// sizeof geeft totale bytes terug, niet de elementen.
// Daarom delen we de totale bytes door de hoeveelheid bytes van 1 element.
const int pinAmount = sizeof(pinArray) / sizeof(pinArray[0]);

// Deze code wordt 1 keer uitgevoerd na opstarten.
void setup() {
  // For loop om door het aantal LED lampjes te gaan.
  for (int x = 0; x < pinAmount; x++){
    // Voor elk lampje, roep setupLeds() aan. Geef de index waarde mee.
    setupLeds(x);
  }
}

// Blijft constant deze code loopen tijdens dat de arduino aan is.
void loop(){
  // Waarde van de potmeter lezen.
  potValue = analogRead(potPin);
  // Roep deze functie aan en geef de waarde mee.
  changeLeds(potValue);
}

// Functie om de lampjes te initialiseren.
void setupLeds(int index){
  // Zorgt dat de pins een output worden bij elk lampje.
  pinMode(pinArray[index], OUTPUT);
}

// Functie om lampjes te veranderen.
void changeLeds(int value){
  // Verdeel eerst de maximale waarde van de potmeter over het aantal lampjes.
  // Dan word de huidige waarde van de potmeter gedeeld door de waarde van elk vlak.
  // Het resultaat is het aantal ledjes dat uitgezet moet worden.
  int ledsToTurnOff = value / (1024 / pinAmount);

  // For loop om door de hoeveelheid pins te gaan.
  for (int x = 0; x < pinAmount; x++) {
    // Voor elke LED, kijk of de indexwaarde van de LED
    // kleiner is dan de hoeveelheid LED's om uit te zetten.
    if (x < ledsToTurnOff) {
      // Als dit zo is, betekent dat deze LED uit moet.
      digitalWrite(pinArray[x], LOW);
    } else {
      // Zo niet, dan blijft hij aan, of gaat hij dus weer terug aan.
      digitalWrite(pinArray[x], HIGH);
    }
  }
}